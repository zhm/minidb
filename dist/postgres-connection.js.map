{"version":3,"file":"postgres-connection.js","names":["_databaseCursor","_interopRequireDefault","require","_databaseConnection","_pg","e","__esModule","default","driver","PostgresConnection","DatabaseConnection","dr","pool","connectionString","_pool","createPool","poolOptions","connect","options","_connect","query","args","DatabaseCursor","rawClient","convert","column","value","pg","types","getTypeParser","type","exports"],"sources":["../src/postgres-connection.js"],"sourcesContent":["import DatabaseCursor from './database-cursor';\nimport DatabaseConnection from './database-connection';\nimport pg from 'pg';\n\nlet driver = null;\n\nexport default class PostgresConnection extends DatabaseConnection {\n  static set driver(dr) {\n    driver = dr;\n  }\n\n  static pool(connectionString) {\n    return this._pool(driver.createPool, connectionString, PostgresConnection.poolOptions);\n  }\n\n  static async connect(options) {\n    return this._connect(PostgresConnection, options);\n  }\n\n  query(...args) {\n    return new DatabaseCursor(this, this.rawClient.query(...args), this.convert);\n  }\n\n  convert({column, value}) {\n    return pg.types.getTypeParser(column.type)(value);\n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,eAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,mBAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,GAAA,GAAAH,sBAAA,CAAAC,OAAA;AAAoB,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEpB,IAAIG,MAAM,GAAG,IAAI;AAEF,MAAMC,kBAAkB,SAASC,2BAAkB,CAAC;EACjE,WAAWF,MAAMA,CAACG,EAAE,EAAE;IACpBH,MAAM,GAAGG,EAAE;EACb;EAEA,OAAOC,IAAIA,CAACC,gBAAgB,EAAE;IAC5B,OAAO,IAAI,CAACC,KAAK,CAACN,MAAM,CAACO,UAAU,EAAEF,gBAAgB,EAAEJ,kBAAkB,CAACO,WAAW,CAAC;EACxF;EAEA,aAAaC,OAAOA,CAACC,OAAO,EAAE;IAC5B,OAAO,IAAI,CAACC,QAAQ,CAACV,kBAAkB,EAAES,OAAO,CAAC;EACnD;EAEAE,KAAKA,CAAC,GAAGC,IAAI,EAAE;IACb,OAAO,IAAIC,uBAAc,CAAC,IAAI,EAAE,IAAI,CAACC,SAAS,CAACH,KAAK,CAAC,GAAGC,IAAI,CAAC,EAAE,IAAI,CAACG,OAAO,CAAC;EAC9E;EAEAA,OAAOA,CAAC;IAACC,MAAM;IAAEC;EAAK,CAAC,EAAE;IACvB,OAAOC,WAAE,CAACC,KAAK,CAACC,aAAa,CAACJ,MAAM,CAACK,IAAI,CAAC,CAACJ,KAAK,CAAC;EACnD;AACF;AAACK,OAAA,CAAAxB,OAAA,GAAAE,kBAAA","ignoreList":[]}