{"version":3,"sources":["../src/postgres-connection.js"],"names":["driver","PostgresConnection","DatabaseConnection","dr","pool","connectionString","_pool","createPool","poolOptions","connect","options","_connect","query","args","DatabaseCursor","rawClient","convert","column","value","pg","types","getTypeParser","type"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,IAAIA,MAAM,GAAG,IAAb;;AAEe,MAAMC,kBAAN,SAAiCC,2BAAjC,CAAoD;AAChD,aAANF,MAAM,CAACG,EAAD,EAAK;AACpBH,IAAAA,MAAM,GAAGG,EAAT;AACD;;AAEU,SAAJC,IAAI,CAACC,gBAAD,EAAmB;AAC5B,WAAO,KAAKC,KAAL,CAAWN,MAAM,CAACO,UAAlB,EAA8BF,gBAA9B,EAAgDJ,kBAAkB,CAACO,WAAnE,CAAP;AACD;;AAEmB,eAAPC,OAAO,CAACC,OAAD,EAAU;AAC5B,WAAO,KAAKC,QAAL,CAAcV,kBAAd,EAAkCS,OAAlC,CAAP;AACD;;AAEDE,EAAAA,KAAK,CAAC,GAAGC,IAAJ,EAAU;AACb,WAAO,IAAIC,uBAAJ,CAAmB,IAAnB,EAAyB,KAAKC,SAAL,CAAeH,KAAf,CAAqB,GAAGC,IAAxB,CAAzB,EAAwD,KAAKG,OAA7D,CAAP;AACD;;AAEDA,EAAAA,OAAO,CAAC;AAACC,IAAAA,MAAD;AAASC,IAAAA;AAAT,GAAD,EAAkB;AACvB,WAAOC,YAAGC,KAAH,CAASC,aAAT,CAAuBJ,MAAM,CAACK,IAA9B,EAAoCJ,KAApC,CAAP;AACD;;AAnBgE","sourcesContent":["import DatabaseCursor from './database-cursor';\nimport DatabaseConnection from './database-connection';\nimport pg from 'pg';\n\nlet driver = null;\n\nexport default class PostgresConnection extends DatabaseConnection {\n  static set driver(dr) {\n    driver = dr;\n  }\n\n  static pool(connectionString) {\n    return this._pool(driver.createPool, connectionString, PostgresConnection.poolOptions);\n  }\n\n  static async connect(options) {\n    return this._connect(PostgresConnection, options);\n  }\n\n  query(...args) {\n    return new DatabaseCursor(this, this.rawClient.query(...args), this.convert);\n  }\n\n  convert({column, value}) {\n    return pg.types.getTypeParser(column.type)(value);\n  }\n}\n"],"file":"postgres-connection.js"}